{"version":3,"sources":["demo/events.cljs"],"mappings":";AAQA,yDAAA,zDAACA,oJAEC,WAAAC,SAA2BM;AAA3B,AAAA,IAAAL,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;WAAAA,PAAqBI;SAArB,AAAAF,4CAAAF,eAAA,hEAAaG;AAAb,AAAA,kDAAA,6DAAA,mFAAA,gGAAA,gDAGa,AAACG,uGAAMH,GAAGI;;AAGzB,yDAAA,zDAACT,iJAEC,EAAA,AAAAU,iDAAA,WAAYH,EAAEA;AAAd,AAAA,IAAAI,6BAAA;AAAA,AAAA,IAAA,AAAA,AAAAC,gDAAA,AAAA;;AAAA,IAAAC,wBAAA,2CAAA,iEAAA,iBAAAA,wBAAA,uGAAA,iBAAAA,xHAEgBL,gJAAMS;AAFtB,AAAA,AAAAH,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,6EAAA,qEAAA;;AAAAA;KAAA,iBAAAA,wBAAA,2CAAA,uDAAA,mDAAA,mDAAA,WAAA,iEAAA,iBAAAA,wBAAA,mFAAA;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,KAAA,yDAAAD,sBAAA,sDAAA,AAAA,2LAAA,qEAAA;;AAAAA;KAAA,gEAAA,iBAAAA,wBAAA,mFAAA;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,KAAA,yDAAAD,sBAAA,sDAAA,AAAA,+LAAA,qEAAA;;AAAAA;;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,stBAAA,qEAAA;;AAAAA;;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,82BAAA,qEAAA;;AAAAA;;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,k+BAAA,qEAAA;;AAAAA;gBAAA,IAAAE,IAAAC;AAAA,AAAA,MAAAD;IAAA,WAAYR,EAAEA;AAAd,AAAA,kDAAA,iEAEe,kIAAA,2CAAA,uDAAA,mDAAA,mDAAA,WAAA,iEAAA,mFAAA,wGAAA,gEAAA,mFAAA,puBAACC,uGAAMS;;AAOxB,yDAAA,zDAACC,yJAEC,EAAA,AAAAR,iDAAA,cAAAS,HAAYd;AAAZ,AAAA,IAAAe,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAAgBb;IAAhBe,aAAA,AAAAD,4CAAAD,WAAA,IAAA;IAAAE,iBAAA,AAAAnB,4BAAAmB;cAAA,AAAAlB,4CAAAkB,eAAA,rEAA0BK;AAA1B,AAAA,IAAAhB,6BAAA;AAAA,AAAA,IAAA,AAAA,AAAAC,gDAAA,AAAA;;AAAA,IAAAC,wBAAA,8CAAA,iBAAAA,/DAEGe,uFAAMvB;AAFT,AAAA,AAAAS,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,sDAAA,qEAAA;;AAAAA;KAAA,0DAAA,iBAAAA,wBAEqBc;AAFrB,AAAA,AAAAb,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,+DAAA,qEAAA;;AAAAA;;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,0PAAA,qEAAA;;AAAAA;gBAAA,IAAAE,IAAAQ;AAAA,AAAA,MAAAR;IAAA,cAAAS,HAAYnB;AAAZ,AAAA,IAAAoB,aAAAD;QAAA,AAAAH,4CAAAI,WAAA,IAAA,/DAAgBlB;IAAhBmB,aAAA,AAAAL,4CAAAI,WAAA,IAAA;IAAAC,iBAAA,AAAAvB,4BAAAuB;cAAA,AAAAtB,4CAAAsB,eAAA,rEAA0BC;AAA1B,AAEE,wDAAA,jDAACC,8CAAMvB,6DAAYsB;;AAGvB,yDAAA,zDAACT,yJAEC,EAAA,AAAAR,iDAAA,cAAAmB,HAAYxB;AAAZ,AAAA,IAAAyB,aAAAD;QAAA,AAAAR,4CAAAS,WAAA,IAAA,/DAAgBvB;YAAhB,AAAAc,4CAAAS,WAAA,IAAA,nEAAkBvB;AAAlB,AAAA,IAAAI,6BAAA;AAAA,AAAA,IAAA,AAAA,AAAAC,gDAAA,AAAA;;AAAA,IAAAC,wBAAA,8CAAA,iBAAAA,/DACGe,uFAAMvB;AADT,AAAA,AAAAS,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,sDAAA,qEAAA;;AAAAA;KAAA,0DAAA;AAAA,AAAA,AAAAC,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,qMAAA,qEAAA;;AAAAA;gBAAA,IAAAE,IAAAgB;AAAA,AAAA,MAAAhB;IAAA,cAAAiB,HAAY3B;AAAZ,AAAA,IAAA4B,aAAAD;QAAA,AAAAX,4CAAAY,WAAA,IAAA,/DAAgB1B;YAAhB,AAAAc,4CAAAY,WAAA,IAAA,nEAAkB1B;AAAlB,AACE,wDAAA,0DAAA,3GAACqB,8CAAMvB;;AAMX","names":["re_frame.core.reg_event_fx","p__47440","map__47441","cljs.core/--destructure-map","cljs.core.get","db","cofx","_","cljs.core.merge","demo.db/default-db","day8.re-frame.tracing/is-trace-enabled?","+debux-dbg-opts+","day8.re-frame.debux.common.util/send-form!","result__38107__auto__","day8.re-frame.debux.common.util/send-trace!","e","e47442","demo.events/default-header","re_frame.core.reg_event_db","p__47453","vec__47454","cljs.core.nth","map__47457","e47458","p__47468","vec__47469","map__47472","version","cljs.core.assoc","p__47473","vec__47476","e47479","p__47484","vec__47485"],"sourcesContent":["(ns demo.events\n  (:require [day8.re-frame.http-fx]\n            [day8.re-frame.tracing :refer-macros [fn-traced]]\n            [demo.db :as db]\n            [re-frame.core :as re-frame]\n            [taoensso.timbre :as log]))\n\n\n(re-frame/reg-event-fx\n  ::initialize-db\n  (fn [{:keys [db] :as cofx} _]\n    ;(log/info \"(RCCST) ::initialize-db\" db)\n    {:dispatch [::get-version]\n     :db       (merge db db/default-db)}))\n\n\n(re-frame/reg-event-fx\n  ::get-version\n  (fn-traced [_ _]\n    ;(log/info \"::get-version\")\n    {:http-xhrio (merge default-header\n                   {:method     :get\n                    :uri        \"/version\"\n                    :on-success [::version-success]\n                    :on-failure [::bad-lookup-result]})}))\n\n\n(re-frame/reg-event-db\n  ::version-success\n  (fn-traced [db [_ {:keys [version]}]]\n    ;(log/info \"::version-success\" version)\n    (assoc db :version version)))\n\n\n(re-frame/reg-event-db\n  ::version-failure\n  (fn-traced [db [_ _]]\n    (assoc db :version \"unknown\")))\n\n\n\n\n; some events to dispatch from the REPL\n(comment\n  (re-frame/dispatch [::name \"Black Hammer\"])\n  (re-frame/dispatch [::initialize-db])\n\n  (re-frame/dispatch [::get-version])\n\n  @re-frame.db/app-db\n\n  ())"]}