{"version":3,"sources":["demo/src/catalog/molecule/example/composite/simple_multi_chart_2.cljs"],"mappings":"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","names":["taoensso.timbre._log_BANG_","taoensso.timbre/*config*","cljs.core/Delay","demo.src.catalog.molecule.example.composite.simple-multi-chart-2/data-tools","data","old-data","bh-ui.utils/subscribe-local","re-com.core/h-box","js/goog.DEBUG","re-com.core/button","bh-ui.utils.helpers/handle-change-path","bh-ui.molecule.composite.simple-multi-chart-2/sample-data","cljs.core/deref","cljs.core/assoc-in","cljs.core.assoc","cljs.core.conj","cljs.core.into","cljs.core.drop_last","cljs.core.map","x","cljs.core/rand-int","demo.src.catalog.molecule.example.composite.simple-multi-chart-2/config-tools","config-data","brush?","uv?","tv?","bh-ui.molecule.composite.simple-multi-chart-2/default-config-data","cljs.core/not","bh-ui.atom.chart.utils/color-config","G__61208","fexpr__61207","G__61210","fexpr__61209","G__61212","fexpr__61211","G__61214","fexpr__61213","var_args","args__4870__auto__","len__4864__auto__","i__4865__auto__","argseq__4871__auto__","cljs.core/IndexedSeq","demo.src.catalog.molecule.example.composite.simple-multi-chart-2/data-config-update-example","p__61216","map__61217","cljs.core/--destructure-map","cljs.core.get","seq61215","self__4852__auto__","cljs.core/seq","widget","component-id","params","re-com.core/v-box","demo.src.catalog.molecule.example.composite.simple-multi-chart-2/example","container-id","bh_ui.utils.helpers.path__GT_keyword","G__61218","G__61219","G__61220","G__61221","woolybear.ad.utils/demo","woolybear.ad.layout/frame","bh-ui.molecule.grid-container/component","reagent.core.atom","bh-ui.molecule.composite.simple-multi-chart-2/ui-definition","bh-ui.molecule.composite.simple-multi-chart-2/source-code"],"sourcesContent":["(ns demo.src.catalog.molecule.example.composite.simple-multi-chart-2\n  (:require [bh-ui.atom.chart.utils :as chart-utils]\n            [bh-ui.molecule.composite.simple-multi-chart-2 :as widget]\n            [bh-ui.molecule.grid-container :as grid]\n            [bh-ui.utils :as ui-utils]\n            [bh-ui.utils.helpers :as h]\n            [re-com.core :as rc]\n            [re-frame.core :as re-frame]\n            [reagent.core :as r]\n            [taoensso.timbre :as log]\n            [woolybear.ad.utils :as acu]\n            [woolybear.ad.layout :as layout]))\n\n\n(log/info \"demo.src.catalog.molecule.example.composite.simple-multi-chart-2\")\n\n\n(defn- data-tools [data]\n  (let [old-data (ui-utils/subscribe-local data [])]\n\n    ;(log/info \"data-tools\" data \"//\" @old-data)\n\n    (fn []\n      [rc/h-box :src (rc/at)\n       :gap \"10px\"\n       :style {:border     \"1px solid\" :border-radius \"3px\"\n               :box-shadow \"5px 5px 5px 2px\"\n               :margin     \"5px\" :padding \"5px\"}\n       :children [[:label.h5 \"Input Data:\"]\n\n                  [rc/button :on-click #(h/handle-change-path data [] []) :label \"Empty\"]\n\n                  [rc/button :on-click #(h/handle-change-path data [] widget/sample-data)\n                   :label \"Default\"]\n\n                  [rc/button :on-click #(h/handle-change-path data []\n                                          (assoc-in @old-data [:data 0 :uv] 10000))\n                   :label \"A -> 10000\"]\n\n                  [rc/button :on-click #(h/handle-change-path data []\n                                          (assoc @old-data :data\n                                            (conj (:data @old-data)\n                                              {:name \"Page Q\" :uv 1100\n                                               :pv   1100 :tv 1100 :amt 1100})))\n                   :label \"Add 'Q'\"]\n\n                  [rc/button :on-click #(h/handle-change-path data []\n                                          (assoc @old-data :data\n                                            (into [] (drop-last 2 (:data @old-data)))))\n                   :label \"Drop Last 2\"]\n\n                  [rc/button :on-click #(h/handle-change-path data []\n                                          (-> @old-data\n                                            (assoc-in [:metadata :fields :new-item] :number)\n                                            (assoc :data (into []\n                                                           (map (fn [x]\n                                                                  (assoc x :new-item (rand-int 7000)))\n                                                             (:data @old-data))))))\n                   :label \"Add :new-item\"]]])))\n\n\n(defn- config-tools [config-data]\n  (let [brush? (ui-utils/subscribe-local config-data [:brush])\n        uv?    (ui-utils/subscribe-local config-data [:uv :include])\n        tv?    (ui-utils/subscribe-local config-data [:tv :include])]\n\n    ;(log/info \"config-tools\" config-data \"//\" @brush? \"//\" @uv?)\n\n    (fn []\n      [rc/h-box :src (rc/at)\n       :gap \"10px\"\n       :style {:border     \"1px solid\" :border-radius \"3px\"\n               :box-shadow \"5px 5px 5px 2px\"\n               :margin     \"5px\" :padding \"5px\"}\n       :children [[:label.h5 \"Config:\"]\n                  [rc/button :on-click #(h/handle-change-path config-data [] widget/default-config-data) :label \"Default\"]\n                  [rc/button :on-click #(h/handle-change-path config-data [:brush] (not @brush?))\n                   :label \"!Brush\"]\n                  [rc/button :on-click #(h/handle-change-path config-data [:uv :include] (not @uv?))\n                   :label \"! uv data\"]\n                  [rc/button :on-click #(h/handle-change-path config-data [:tv :include] (not @tv?))\n                   :label \"! tv data\"]\n\n                  [chart-utils/color-config config-data \":amt :fill\" [:amt :fill] :above-center]\n\n                  [rc/button :on-click #((h/handle-change-path config-data [:uv :stackId] \"b\")\n                                         (h/handle-change-path config-data [:pv :stackId] \"b\"))\n                   :label \"stack uv/pv\"]\n                  [rc/button :on-click #((h/handle-change-path config-data [:uv :stackId] \"\")\n                                         (h/handle-change-path config-data [:pv :stackId] \"\"))\n                   :label \"!stack uv/pv\"]\n                  [rc/button :on-click #((h/handle-change-path config-data [:tv :stackId] \"a\")\n                                         (h/handle-change-path config-data [:amt :stackId] \"a\"))\n                   :label \"stack tv/amt\"]\n                  [rc/button :on-click #((h/handle-change-path config-data [:tv :stackId] \"\")\n                                         (h/handle-change-path config-data [:amt :stackId] \"\"))\n                   :label \"!stack tv/amt\"]]])))\n\n\n(defn- data-config-update-example [& {:keys [widget component-id] :as params}]\n  ;(log/info \"config-update-example (params)\" params)\n\n  [rc/v-box :src (rc/at)\n   :gap \"10px\"\n   :width \"100%\"\n   :height \"100%\"\n   :children [[:div.chart-part {:style {:width \"100%\"}}     ;:height \"90%\"}}\n               widget]\n\n              [rc/v-box :src (rc/at)\n               :gap \"8px\"\n               :children [[data-tools [component-id :blackboard :topic.data]]\n                          [config-tools [component-id :blackboard :topic.config]]]]]])\n\n\n(defn example []\n  (let [container-id \"simple-multi-chart-2\"\n        component-id (h/path->keyword container-id \"widget\")]\n    (fn []\n      (acu/demo \"(A simple) Multiple Charts in a Widget (adding configuration)\"\n        \"This example provides a 'widget' (collection of UI Components) organized into a digraph (Event Model) that\n          describes the flow of data from sources (remote or local) into and out-of the UI.\n\n> This example works on the entire 'data' item, rather than _reaching inside_ like\n> `atom/example/chart/bar-chart/data-sub-example`\n>\n> See also `molecule/example/simple-multi-chart-2`\n\"\n        [layout/frame\n         ;;\n         ;; NOTE: the :height MUST be specified here since the ResponsiveContainer down in bowels of the chart needs a height\n         ;; in order to actually draw the Recharts components. just saying \"100%\" doesn't work, since the\n         ;; that really means \"be as big as you need\" and ResponsiveContainer then doesn't know what to do.\n         ;;\n         [:div {:style {:width \"100%\" :min-height \"400px\"}}\n          [data-config-update-example\n           :widget [grid/component\n                    :data (r/atom widget/ui-definition)\n                    :component-id component-id\n                    :resizable true\n                    :tools true]\n           :component-id component-id]]]\n\n        widget/source-code))))\n\n\n(comment\n  (do\n    (def container-id \"simple-multi-chart-2\")\n    (def component-id (h/path->keyword container-id \"widget\"))\n    (def data [component-id :blackboard :topic.data])\n    (def path [:data])\n    (def old-data (ui-utils/resolve-subscribe-local data [:data]))\n\n    (def value data)\n    (def new-value (assoc-in @old-data [0 :uv] 10000)))\n\n  (re-frame/subscribe [(h/path->keyword data)])\n\n\n  (ui-utils/subscribe-local data [])\n  (ui-utils/subscribe-local data [:data])\n  (ui-utils/subscribe-local data [:data 0])\n  (ui-utils/subscribe-local data [:data 0 :uv])\n\n\n  (cond\n    (or (coll? value)\n      (keyword? value)\n      (string? value)) (let [update-event (conj [(h/path->keyword value path)] new-value)]\n                         ;(log/info \"handle-change-path (update event)\" update-event)\n                         (re-frame/dispatch update-event))\n    (instance? reagent.ratom.RAtom value) (swap! value assoc-in path new-value)\n    (instance? Atom value) (swap! value assoc-in path new-value)\n    :else ())\n\n\n  (h/handle-change-path data [:data]\n    (assoc-in @old-data [0 :uv] 10000))\n\n\n  :simple-multi-chart.widget.blackboard.topic.data.data\n\n  (:event @re-frame.registrar/kind->id->handler)\n\n  (get-in @re-frame.registrar/kind->id->handler [:event :simple-multi-chart.widget.blackboard.topic.data])\n  (get-in @re-frame.registrar/kind->id->handler [:event :simple-multi-chart.widget.blackboard.topic.data.data])\n\n\n  ())\n\n"]}