goog.provide('bh_ui.utils.locals');
taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$11(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,"info","info",-317069002),"bh-ui.utils.locals",null,10,new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.Keyword(null,"auto","auto",-566279492),(new cljs.core.Delay((function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["bh-ui.utils.locals"], null);
}),null)),null,-1091878993,null);
re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword("events","init-container-locals","events/init-container-locals",1942715014),((day8.re_frame.tracing.is_trace_enabled_QMARK_())?(function (db,p__50897){
var vec__50898 = p__50897;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50898,(0),null);
var container = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50898,(1),null);
var values = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50898,(2),null);
var _PLUS_debux_dbg_opts_PLUS_ = null;
try{day8.re_frame.debux.common.util.send_form_BANG_(cljs.core.list(new cljs.core.Symbol(null,"fn-traced*","fn-traced*",-2067995546,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null),new cljs.core.Symbol(null,"container","container",-96406180,null),new cljs.core.Symbol(null,"values","values",2013177083,null)], null)], null),cljs.core.list(new cljs.core.Symbol(null,"if","if",1181717262,null),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null)),new cljs.core.Symbol(null,"values","values",2013177083,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null),new cljs.core.Symbol(null,"values","values",2013177083,null))))));

var result__38107__auto__ = (((function (){var result__38107__auto__ = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((function (){var result__38107__auto__ = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2((function (){var result__38107__auto__ = db;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(4),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),(function (){var result__38107__auto__ = container;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(7),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"container","container",-96406180,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(4)], null));

return result__38107__auto__;
})()], null);
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(5),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(3),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = values;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(8),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"values","values",2013177083,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(2),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null)),new cljs.core.Symbol(null,"values","values",2013177083,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(1)], null));

return result__38107__auto__;
})())?(function (){var result__38107__auto__ = (function (){var result__38107__auto__ = db;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),3,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(10),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})();
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(9),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(1)], null));

return result__38107__auto__;
})():(function (){var result__38107__auto__ = (function (){var result__38107__auto__ = cljs.core.assoc_in((function (){var result__38107__auto__ = db;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),4,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(13),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),(function (){var result__38107__auto__ = container;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),3,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(16),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"container","container",-96406180,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(4)], null));

return result__38107__auto__;
})()], null);
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(14),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = values;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),3,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(17),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"values","values",2013177083,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(12),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null),new cljs.core.Symbol(null,"values","values",2013177083,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})();
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(11),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null),new cljs.core.Symbol(null,"values","values",2013177083,null))),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(1)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(1),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"if","if",1181717262,null),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null)),new cljs.core.Symbol(null,"values","values",2013177083,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),new cljs.core.Symbol(null,"container","container",-96406180,null)], null),new cljs.core.Symbol(null,"values","values",2013177083,null)))),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(0)], null));

return result__38107__auto__;
}catch (e50903){var e = e50903;
throw e;
}}):(function (db,p__50908){
var vec__50909 = p__50908;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50909,(0),null);
var container = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50909,(1),null);
var values = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50909,(2),null);
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),container], null)),values)){
return db;
} else {
return cljs.core.assoc_in(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),container], null),values);
}
})));
re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword("events","init-local-path","events/init-local-path",768710122),((day8.re_frame.tracing.is_trace_enabled_QMARK_())?(function (db,p__50913){
var vec__50914 = p__50913;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50914,(0),null);
var local_path = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50914,(1),null);
var values = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50914,(2),null);
var _PLUS_debux_dbg_opts_PLUS_ = null;
try{day8.re_frame.debux.common.util.send_form_BANG_(cljs.core.list(new cljs.core.Symbol(null,"fn-traced*","fn-traced*",-2067995546,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Symbol(null,"values","values",2013177083,null)], null)], null),cljs.core.list(new cljs.core.Symbol(null,"if","if",1181717262,null),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null)),new cljs.core.Symbol(null,"values","values",2013177083,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Symbol(null,"values","values",2013177083,null))))));

var result__38107__auto__ = (((function (){var result__38107__auto__ = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((function (){var result__38107__auto__ = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2((function (){var result__38107__auto__ = db;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(4),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = local_path;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(5),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(3),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = values;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),2,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(6),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"values","values",2013177083,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(2),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null)),new cljs.core.Symbol(null,"values","values",2013177083,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(1)], null));

return result__38107__auto__;
})())?(function (){var result__38107__auto__ = (function (){var result__38107__auto__ = db;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),3,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(8),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})();
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(7),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(1)], null));

return result__38107__auto__;
})():(function (){var result__38107__auto__ = (function (){var result__38107__auto__ = cljs.core.assoc_in((function (){var result__38107__auto__ = db;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),4,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(11),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = local_path;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),3,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(12),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})(),(function (){var result__38107__auto__ = values;
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),3,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(13),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Symbol(null,"values","values",2013177083,null),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(3)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(10),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Symbol(null,"values","values",2013177083,null)),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(2)], null));

return result__38107__auto__;
})();
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(9),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Symbol(null,"values","values",2013177083,null))),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(1)], null));

return result__38107__auto__;
})());
day8.re_frame.debux.common.util.send_trace_BANG_(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"num-seen","num-seen",-1576518431),1,new cljs.core.Keyword(null,"syntax-order","syntax-order",-990682045),(1),new cljs.core.Keyword(null,"result","result",1415092211),result__38107__auto__,new cljs.core.Keyword(null,"form","form",-1624062471),cljs.core.list(new cljs.core.Symbol(null,"if","if",1181717262,null),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",-1965644065,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null)),new cljs.core.Symbol(null,"values","values",2013177083,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),cljs.core.list(new cljs.core.Symbol(null,"do","do",1686842252,null),cljs.core.list(new cljs.core.Symbol(null,"assoc-in","assoc-in",-113585743,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"local-path","local-path",-1129952494,null),new cljs.core.Symbol(null,"values","values",2013177083,null)))),new cljs.core.Keyword(null,"indent-level","indent-level",-258835684),(0)], null));

return result__38107__auto__;
}catch (e50918){var e = e50918;
throw e;
}}):(function (db,p__50919){
var vec__50920 = p__50919;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50920,(0),null);
var local_path = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50920,(1),null);
var values = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50920,(2),null);
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(db,local_path),values)){
return db;
} else {
return cljs.core.assoc_in(db,local_path,values);
}
})));
/**
 * add the given 'tree' of values into the app-db under the `[:containers <container-id as a keyword>] path
 * 
 *   `component-id` is automatically converted into a `keyword`
 * 
 *   In cases where there are multiple containers of the same 'type', using 'locals' keeps each
 *   instance's local state away from all the others, so changing the state of one does _not_ change
 *   them all.
 * 
 *   ---
 * 
 *   - `component-id` : (string) id of the component, passed as a string so we can use generated values (like guids)
 *   - `values` : (hash-map) hash-map (tree) of values specific to _this_ container.
 * 
 *   
 */
bh_ui.utils.locals.init_local_values = (function bh_ui$utils$locals$init_local_values(component_id,values){
var target = cljs.core.keyword.cljs$core$IFn$_invoke$arity$1(component_id);
var path = new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("events","init-container-locals","events/init-container-locals",1942715014),target,values], null);
return re_frame.core.dispatch_sync(path);
});
bh_ui.utils.locals.update_local_values = (function bh_ui$utils$locals$update_local_values(component_id,values){
var target = cljs.core.keyword.cljs$core$IFn$_invoke$arity$1(component_id);
var old = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(cljs.core.deref(re_frame.db.app_db),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),target], null));
var old_vals = cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentHashSet.EMPTY,cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__50923_SHARP_){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((1),cljs.core.count(p1__50923_SHARP_));
}),(function (){var G__50927 = cljs.core.PersistentVector.EMPTY;
var G__50928 = null;
var G__50929 = old;
return (bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3 ? bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3(G__50927,G__50928,G__50929) : bh_ui.utils.locals.process_locals.call(null,G__50927,G__50928,G__50929));
})()));
var new_vals_paths = (function (){var G__50930 = cljs.core.PersistentVector.EMPTY;
var G__50931 = null;
var G__50932 = values;
return (bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3 ? bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3(G__50930,G__50931,G__50932) : bh_ui.utils.locals.process_locals.call(null,G__50930,G__50931,G__50932));
})();
var new_vals = cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentHashSet.EMPTY,cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__50924_SHARP_){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((1),cljs.core.count(p1__50924_SHARP_));
}),new_vals_paths));
var diff = clojure.set.difference.cljs$core$IFn$_invoke$arity$2(new_vals,old_vals);
var merged_values = cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([old,cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__50933){
var vec__50934 = p__50933;
var path = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50934,(0),null);
return cljs.core.PersistentArrayMap.createAsIfByAssoc([path,cljs.core.get.cljs$core$IFn$_invoke$arity$2(values,path)]);
}),diff))], 0));
if((!(cljs.core.empty_QMARK_(diff)))){
re_frame.core.dispatch_sync(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("events","init-container-locals","events/init-container-locals",1942715014),target,merged_values], null));

cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__50925_SHARP_){
return (bh_ui.utils.locals.create_container_local_sub.cljs$core$IFn$_invoke$arity$3 ? bh_ui.utils.locals.create_container_local_sub.cljs$core$IFn$_invoke$arity$3(component_id,p1__50925_SHARP_,null) : bh_ui.utils.locals.create_container_local_sub.call(null,component_id,p1__50925_SHARP_,null));
}),new_vals_paths));

return cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__50926_SHARP_){
return (bh_ui.utils.locals.create_container_local_event.cljs$core$IFn$_invoke$arity$2 ? bh_ui.utils.locals.create_container_local_event.cljs$core$IFn$_invoke$arity$2(component_id,p1__50926_SHARP_) : bh_ui.utils.locals.create_container_local_event.call(null,component_id,p1__50926_SHARP_));
}),new_vals_paths));
} else {
return null;
}
});
bh_ui.utils.locals.update_local_path_values = (function bh_ui$utils$locals$update_local_path_values(component_id,target_path,values){
var data_path = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([component_id], 0))], null),target_path);
var container_path = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([component_id], 0))], null),target_path);
var old = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(cljs.core.deref(re_frame.db.app_db),container_path);
var old_vals = cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentHashSet.EMPTY,cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__50937_SHARP_){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((1),cljs.core.count(p1__50937_SHARP_));
}),(function (){var G__50941 = cljs.core.PersistentVector.EMPTY;
var G__50942 = null;
var G__50943 = old;
return (bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3 ? bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3(G__50941,G__50942,G__50943) : bh_ui.utils.locals.process_locals.call(null,G__50941,G__50942,G__50943));
})()));
var new_vals_paths = (function (){var G__50944 = cljs.core.PersistentVector.EMPTY;
var G__50945 = null;
var G__50946 = values;
return (bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3 ? bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3(G__50944,G__50945,G__50946) : bh_ui.utils.locals.process_locals.call(null,G__50944,G__50945,G__50946));
})();
var new_vals = cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentHashSet.EMPTY,cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__50938_SHARP_){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((1),cljs.core.count(p1__50938_SHARP_));
}),new_vals_paths));
var diff = clojure.set.difference.cljs$core$IFn$_invoke$arity$2(new_vals,old_vals);
var merged_values = cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([old,cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__50947){
var vec__50948 = p__50947;
var path = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50948,(0),null);
return cljs.core.PersistentArrayMap.createAsIfByAssoc([path,cljs.core.get.cljs$core$IFn$_invoke$arity$2(values,path)]);
}),diff))], 0));
if((!(cljs.core.empty_QMARK_(diff)))){
re_frame.core.dispatch_sync(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("events","init-local-path","events/init-local-path",768710122),container_path,merged_values], null));

cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__50939_SHARP_){
var G__50951 = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,data_path,p1__50939_SHARP_);
var G__50952 = null;
return (bh_ui.utils.locals.create_local_path_sub.cljs$core$IFn$_invoke$arity$2 ? bh_ui.utils.locals.create_local_path_sub.cljs$core$IFn$_invoke$arity$2(G__50951,G__50952) : bh_ui.utils.locals.create_local_path_sub.call(null,G__50951,G__50952));
}),new_vals_paths));

cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__50940_SHARP_){
var G__50953 = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,data_path,p1__50940_SHARP_);
return (bh_ui.utils.locals.create_local_path_event.cljs$core$IFn$_invoke$arity$1 ? bh_ui.utils.locals.create_local_path_event.cljs$core$IFn$_invoke$arity$1(G__50953) : bh_ui.utils.locals.create_local_path_event.call(null,G__50953));
}),new_vals_paths));
} else {
}

return merged_values;
});
bh_ui.utils.locals.process_branch = (function bh_ui$utils$locals$process_branch(accum,root,k,v){
var x = accum;
var x__$1 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(x,(cljs.core.truth_(root)?((cljs.core.vector_QMARK_(root))?cljs.core.conj.cljs$core$IFn$_invoke$arity$2(root,k):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [root,k], null)):new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null)));
return cljs.core.apply.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,x__$1,(function (){var G__50954 = cljs.core.PersistentVector.EMPTY;
var G__50955 = (cljs.core.truth_(root)?((cljs.core.vector_QMARK_(root))?cljs.core.conj.cljs$core$IFn$_invoke$arity$2(root,k):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [root,k], null)):k);
var G__50956 = v;
return (bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3 ? bh_ui.utils.locals.process_locals.cljs$core$IFn$_invoke$arity$3(G__50954,G__50955,G__50956) : bh_ui.utils.locals.process_locals.call(null,G__50954,G__50955,G__50956));
})());
});
bh_ui.utils.locals.process_leaf = (function bh_ui$utils$locals$process_leaf(accum,root,k){
return cljs.core.conj.cljs$core$IFn$_invoke$arity$2(accum,(cljs.core.truth_(root)?((cljs.core.vector_QMARK_(root))?cljs.core.conj.cljs$core$IFn$_invoke$arity$2(root,k):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [root,k], null)):new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null)));
});
/**
 * recursively walks through the 'tree' of values and computes the 'path vector' to reach each
 *   value.
 * 
 *   For example:
 * 
 *   `{:value-1 "dummy" :value-2 {:nested-value "dummy"}}`
 * 
 *   would have paths:
 * 
 *   `[[:value-1] [:value-2] [:value-2 :nested-value]]`
 * 
 *   This is a preparation step for creating and registering the re-frame
 *   [subscription handlers](https://day8.github.io/re-frame/subscriptions/), so we must
 *   create a vector for each value in the 'tree' so other code, like a UI 'container', can subscribe to
 *   the value and automatically 'update and render'.
 * 
 *   ---
 * 
 *   - a : (vector) the starting value to accumulate the result into, typically `[]`
 *   - r : (any) the initial value of the 'root' item, typically `()`
 *   - t : (hash-map) the 'tree' of values to process
 * 
 *   Returns a `vector` of `vector`s of `keyword`s, where each is the path (relative to the initial `r`^*^) to
 *   the specific value of interest.
 * 
 * > Note: ^*^ typically we sort out the 'base' for the relative paths separately, using
 * > [[create-container-local-sub]]
 * 
 *   
 */
bh_ui.utils.locals.process_locals = (function bh_ui$utils$locals$process_locals(a,r,t){
var accum = a;
var root = r;
var tree = t;
while(true){
if(cljs.core.empty_QMARK_(tree)){
return accum;
} else {
var vec__50957 = cljs.core.first(tree);
var k = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50957,(0),null);
var v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50957,(1),null);
var G__51023 = ((cljs.core.map_QMARK_(v))?bh_ui.utils.locals.process_branch(accum,root,k,v):bh_ui.utils.locals.process_leaf(accum,root,k));
var G__51024 = root;
var G__51025 = cljs.core.rest(tree);
accum = G__51023;
root = G__51024;
tree = G__51025;
continue;
}
break;
}
});
bh_ui.utils.locals.compute_container_path = (function bh_ui$utils$locals$compute_container_path(container_id,a,more){
return bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,"blackboard",a,more], 0));
});
bh_ui.utils.locals.compute_container_deps = (function bh_ui$utils$locals$compute_container_deps(container_id,a,more){
if(cljs.core.truth_(more)){
return bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,cljs.core.drop_last.cljs$core$IFn$_invoke$arity$1(more)], 0));
} else {
return bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id], 0));
}
});
bh_ui.utils.locals.compute_deps = (function bh_ui$utils$locals$compute_deps(a,more){
if(cljs.core.truth_(more)){
return bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a,cljs.core.drop_last.cljs$core$IFn$_invoke$arity$1(more)], 0));
} else {
return bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0));
}
});
/**
 * create and registers a re-frame [subscription handler](https://day8.github.io/re-frame/subscriptions/)
 *   for the `container-id` (as a keyword) inside the `:containers` top-level key in the `app-db`.
 * 
 *   ---
 * 
 *   - `container-id` : (string) id for the container, using a string means we can use generated values, like a guid, for the id
 * 
 *   
 */
bh_ui.utils.locals.create_container_sub = (function bh_ui$utils$locals$create_container_sub(container_id){
var id = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id], 0));
return re_frame.core.reg_sub.cljs$core$IFn$_invoke$arity$variadic(id,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"<-","<-",760412998),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083)], null),(function (containers,_){
return cljs.core.get.cljs$core$IFn$_invoke$arity$2(containers,id);
})], 0));
});
/**
 * create and registers a re-frame [subscription handler](https://day8.github.io/re-frame/subscriptions/)
 *   for the value at the path inside the [`:containers` `container-id as a keyword`] key in the `app-db`.
 * 
 *   ---
 * 
 *   - `container-id` : (string) id for the container, using a string means we can use generated values, like a guid, for the id
 *   - `value-path` : (vector of keywords) the path into the container's values to locate the specific one for this subscription
 * 
 *   `value-path` functions exactly like any other re-frame subscription, but relative to the
 *   `[:containers <container-id as a keyword>]` in the overall `app-db`
 * 
 *   It is destructured as follows:
 * 
 *   | var        | type       | description                         |
 *   |:-----------|:----------:|:------------------------------------|
 *   | `a`        | keyword    | the (primary) value to subscribe to |
 *   | `& more`   | keyword(s) | any additional parts to the path    |
 * 
 *   We use 'cascading subscriptions', i.e., [`Layer-3` subscriptions](https://day8.github.io/re-frame/subscriptions/#reg-sub),
 *   to organize things. In order to generate unique ids for each subscription, we concatenate the
 *   path into a single value:
 * 
 *   assuming: `(def container-id "some-guid")` then path `[:value-2 :nested-value]` would be converted into the subscription named
 *   `:some-guid/value-2.nested-value`
 * 
 * > Note: so developer don't need to understand or even remember this encoding scheme, use the [[subscribe-local]] helper function
 * > in place of standard re-frame subscription calls. It provides the same result, and does all the encoding for you.
 *   
 */
bh_ui.utils.locals.create_container_local_sub = (function bh_ui$utils$locals$create_container_local_sub(container_id,p__50960,default$){
var vec__50961 = p__50960;
var seq__50962 = cljs.core.seq(vec__50961);
var first__50963 = cljs.core.first(seq__50962);
var seq__50962__$1 = cljs.core.next(seq__50962);
var a = first__50963;
var more = seq__50962__$1;
var value_path = vec__50961;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,more], 0));
var dep = bh_ui.utils.locals.compute_container_deps(container_id,a,more);
var item = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([((more)?cljs.core.last(more):a)], 0));
return re_frame.core.reg_sub.cljs$core$IFn$_invoke$arity$variadic(p,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"<-","<-",760412998),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [dep], null),(function (container,_){
var or__4253__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(container,item);
if(cljs.core.truth_(or__4253__auto__)){
return or__4253__auto__;
} else {
return default$;
}
})], 0));
});
bh_ui.utils.locals.create_local_path_sub = (function bh_ui$utils$locals$create_local_path_sub(p__50964,default$){
var vec__50965 = p__50964;
var seq__50966 = cljs.core.seq(vec__50965);
var first__50967 = cljs.core.first(seq__50966);
var seq__50966__$1 = cljs.core.next(seq__50966);
var a = first__50967;
var more = seq__50966__$1;
var value_path = vec__50965;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a,more], 0));
var dep = bh_ui.utils.locals.compute_deps(a,more);
var item = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([((more)?cljs.core.last(more):a)], 0));
return re_frame.core.reg_sub.cljs$core$IFn$_invoke$arity$variadic(p,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"<-","<-",760412998),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [dep], null),(function (container,_){
var or__4253__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(container,item);
if(cljs.core.truth_(or__4253__auto__)){
return or__4253__auto__;
} else {
return default$;
}
})], 0));
});
/**
 * create and registers a re-frame [event handler](https://day8.github.io/re-frame/dominoes-30k/#domino-2-event-handling)
 *   for the `container-id` (as a keyword) inside the `:containers` top-level key in the `app-db`.
 * 
 *   ---
 * 
 *   - `container-id` : (string) id for the widget, using a string means we can use generated values, like a guid, for the id
 * 
 *   
 */
bh_ui.utils.locals.create_container_event = (function bh_ui$utils$locals$create_container_event(container_id){
var id = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id], 0));
return re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2(id,(function (db,p__50968){
var vec__50969 = p__50968;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50969,(0),null);
var new_val = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50969,(1),null);
return cljs.core.assoc_in(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),id], null),new_val);
}));
});
/**
 * create and registers a re-frame [event handler](https://day8.github.io/re-frame/dominoes-30k/#domino-2-event-handling)
 *   for the value at the path inside the [`:containers` `container-id as a keyword`] key in the `app-db`.
 * 
 *   ---
 * 
 *   - `container-id` : (string) id for the container, using a string means we can use generated values, like a guid, for the id
 *   - `value-path` : (vector of keywords) the path into the widget values to locate the specific one for this subscription
 * 
 *   `value-path` functions exactly like any other re-frame subscription, but relative to the
 *   `[:containers <container-id as a keyword>]` in the overall `app-db`
 * 
 *   It is destructured as follows:
 * 
 *   | var        | type       | description                         |
 *   |:-----------|:----------:|:------------------------------------|
 *   | `a`        | keyword    | the (primary) value to subscribe to |
 *   | `& more`   | keyword(s) | any additional parts to the path    |
 * 
 *   We use 'cascading subscriptions', i.e., [`Layer-3` subscriptions](https://day8.github.io/re-frame/subscriptions/#reg-sub),
 *   to organize things. In order to generate unique ids for each subscription, we concatenate the
 *   path into a single value:
 * 
 *   assuming: `(def widget-wid "some-guid")` then path `[:value-2 :nested-value]` would be converted into the subscription named
 *   `:some-guid/value-2.nested-value`
 * 
 * > Note: so developer don't need to understand or even remember this encoding scheme, use the [[subscribe-local]] helper function
 * > in place of standard re-frame subscription calls. It provides the same result, and does all the encoding for you.
 *   
 */
bh_ui.utils.locals.create_container_local_event = (function bh_ui$utils$locals$create_container_local_event(container_id,p__50972){
var vec__50973 = p__50972;
var seq__50974 = cljs.core.seq(vec__50973);
var first__50975 = cljs.core.first(seq__50974);
var seq__50974__$1 = cljs.core.next(seq__50974);
var a = first__50975;
var more = seq__50974__$1;
var value_path = vec__50973;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,more], 0));
return re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2(p,(function (db,p__50976){
var vec__50977 = p__50976;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50977,(0),null);
var new_val = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50977,(1),null);
return cljs.core.assoc_in(db,cljs.core.apply.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083),bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id], 0))], null),cljs.core.map.cljs$core$IFn$_invoke$arity$2(bh_ui.utils.helpers.path__GT_keyword,value_path)),new_val);
}));
});
bh_ui.utils.locals.create_local_path_event = (function bh_ui$utils$locals$create_local_path_event(value_path){
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([value_path], 0));
return re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2(p,(function (db,p__50980){
var vec__50981 = p__50980;
var _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50981,(0),null);
var new_val = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__50981,(1),null);
return cljs.core.assoc_in(db,cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.conj,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"containers","containers",-2127048083)], null),cljs.core.map.cljs$core$IFn$_invoke$arity$2(bh_ui.utils.helpers.path__GT_keyword,value_path)),new_val);
}));
});
/**
 * 1. adds the `locals-and-defaults` into the `app-db` in the correct location
 *   2. creates and registers a subscription to `:containers/<container-id>`
 *   3. creates and registers a subscription (cascaded off `:containers/<container-id>`) for each relative path in `locals-and-defaults`
 *   4. creates and registers an event handler for`:containers/<container-id>`
 *   5. creates and registers an event handler for each relative path in `locals-and-defaults`
 * 
 *   `locals-and-defaults` provides both the structure used to create the subscriptions and the default values when a new widget is
 *   created
 * 
 *   ---
 * 
 *   - `container-id` : (string) id for the container, using a string means we can use generated values, like a guid, for the id
 *   - `locals-and-defaults` : (hash-map) hash-map (tree) of values specific to _this_ widget.
 * 
 * > TODO: need to build the reg-event-db handlers so users/ui can change the locals
 *   
 */
bh_ui.utils.locals.init_container_locals = (function bh_ui$utils$locals$init_container_locals(container_id,locals_and_defaults){
var paths = bh_ui.utils.locals.process_locals(cljs.core.PersistentVector.EMPTY,null,locals_and_defaults);
bh_ui.utils.locals.init_local_values(container_id,locals_and_defaults);

bh_ui.utils.locals.create_container_sub(container_id);

cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__50984_SHARP_){
return bh_ui.utils.locals.create_container_local_sub(container_id,p1__50984_SHARP_,null);
}),paths));

bh_ui.utils.locals.create_container_event(container_id);

return cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__50985_SHARP_){
return bh_ui.utils.locals.create_container_local_event(container_id,p1__50985_SHARP_);
}),paths));
});
/**
 * constructs a Re-frame subscription to a local value since the given
 *   widget's 'locals' in the `app-db`. This way the developer isn't concerned about the
 *   exact location of the data in the `app-db`.
 * 
 *   The container-id string will be converted into a keyword as appropriate to access the
 *   registered subscription, so you can freely use generated values as widget identifiers
 * 
 * > NOTE: the re-frame subscriptions ***MUST*** be created beforehand, using [[init-container-locals]]
 * 
 *   ---
 * 
 *   - `container-id` : (string) name of the widget, typically a guid, but it can be any string you'd like
 *   - `value-path : (vector of keywords) the path into the widget values to locate the specific one for this subscription
 * 
 *   `value-path` functions exactly like any other re-frame subscription, but relative to the
 *   `[:containers <container-id>]` in the overall `app-db`
 * 
 *   It is destructured as follows:
 * 
 *   | var        | type       | description                         |
 *   |:-----------|:----------:|:------------------------------------|
 *   | `a`        | keyword    | the (primary) value to subscribe to |
 *   | `& more`   | keyword(s) | any additional parts to the path    |
 * 
 *   Returns a `reagent/reaction` which can be used exactly like any other re-frame subscription
 * 
 * ---
 * 
 * #### EXAMPLES
 * 
 * Assume
 * 
 * `(def container-id "some-guid")`
 * 
 * and
 * 
 * `(def some-guid-locals {:value-1 "default" :value-2 {:nested-value "default"}})`
 * 
 * | desired subscription | call                                         |
 * |:--------------------:| :--------------------------------------------|
 * | `:value-1`           | `(subscribe-local "some-guid" [:value-1])` |
 * | `:value-2`           | `(subscribe-local "some-guid" [:value-2])` |
 * | `:nested-value`      | `(subscribe-local "some-guid" [:value-2 :nested-value])` |
 *   
 */
bh_ui.utils.locals.subscribe_local = (function bh_ui$utils$locals$subscribe_local(container_id,p__50986){
var vec__50987 = p__50986;
var seq__50988 = cljs.core.seq(vec__50987);
var first__50989 = cljs.core.first(seq__50988);
var seq__50988__$1 = cljs.core.next(seq__50988);
var a = first__50989;
var more = seq__50988__$1;
var value_path = vec__50987;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,more], 0));
return re_frame.core.subscribe.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [p], null));
});
bh_ui.utils.locals.resolve_subscribe_local = (function bh_ui$utils$locals$resolve_subscribe_local(container_id,p__50990){
var vec__50991 = p__50990;
var seq__50992 = cljs.core.seq(vec__50991);
var first__50993 = cljs.core.first(seq__50992);
var seq__50992__$1 = cljs.core.next(seq__50992);
var a = first__50993;
var more = seq__50992__$1;
var value_path = vec__50991;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,more], 0));
var sub_ok = re_frame.core.subscribe.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [p], null));
var get_ok = (function (){var x = re_frame.core.subscribe.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a], 0))], null));
if(cljs.core.truth_(x)){
return cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs.core.deref(x),more);
} else {
return null;
}
})();
var get_in_ok = (function (){var x = re_frame.core.subscribe.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id], 0))], null));
if(cljs.core.truth_(x)){
return cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(cljs.core.deref(x),value_path);
} else {
return null;
}
})();
taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$11(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,"info","info",-317069002),"bh-ui.utils.locals",null,510,new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.Keyword(null,"auto","auto",-566279492),(new cljs.core.Delay((function (){
return new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, ["resolve-subscribe-local (ret)",container_id,",",value_path,"//",sub_ok,"//",get_ok,"//",get_in_ok], null);
}),null)),null,-1731473206,null);

if(cljs.core.truth_(sub_ok)){
return sub_ok;
} else {
if(cljs.core.truth_(get_ok)){
return reagent.ratom.make_reaction((function (){
return get_ok;
}));
} else {
if(cljs.core.truth_(get_in_ok)){
return reagent.ratom.make_reaction((function (){
return get_in_ok;
}));
} else {
return null;
}
}
}
});
/**
 * constructs a Re-frame event dispatch call to a local value stored in the given
 *   widget's 'locals' in the `app-db`. This way the developer isn't concerned about the
 *   exact location of the data in the `app-db`.
 * 
 *   The container-id string will be converted into a keyword as appropriate to access the
 *   registered subscription, so you can freely use generated values as widget identifiers
 * 
 * > NOTE: the re-frame event-handlers ***MUST*** be created beforehand, using [[init-container-locals]]
 * 
 *   ---
 * 
 *   - `container-id` : (string) name of the container, typically a guid, but it can be any string you'd like
 *   - `value-path : (vector of keywords) the path into the widget values to locate the specific one for this subscription
 *   - `new-val` : (any) the new value to store at the given path
 * 
 *   `value-path` functions exactly like any other re-frame subscription, but relative to the
 *   `[:containers <container-id>]` in the overall `app-db`
 * 
 *   It is destructured as follows:
 * 
 *   | var        | type       | description                         |
 *   |:-----------|:----------:|:------------------------------------|
 *   | `a`        | keyword    | the (primary) value to subscribe to |
 *   | `& more`   | keyword(s) | any additional parts to the path    |
 * 
 * ---
 * 
 * #### EXAMPLES
 * 
 *   
 */
bh_ui.utils.locals.dispatch_local = (function bh_ui$utils$locals$dispatch_local(container_id,p__50994,new_val){
var vec__50995 = p__50994;
var seq__50996 = cljs.core.seq(vec__50995);
var first__50997 = cljs.core.first(seq__50996);
var seq__50996__$1 = cljs.core.next(seq__50996);
var a = first__50997;
var more = seq__50996__$1;
var value_path = vec__50995;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,more], 0));
return re_frame.core.dispatch(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [p,new_val], null));
});
/**
 * applies the given function (fn-to-apply) to the value found in the app-db and then
 *   dispatches that new value to replace the old value using dispatch-local with the
 *   original value-path vector
 * 
 *   ---
 * 
 *   - fn-to-apply : (function) takes 1 parameter, the original value at the scubscription vector
 *   
 */
bh_ui.utils.locals.apply_local = (function bh_ui$utils$locals$apply_local(container_id,p__50998,fn_to_apply){
var vec__50999 = p__50998;
var seq__51000 = cljs.core.seq(vec__50999);
var first__51001 = cljs.core.first(seq__51000);
var seq__51000__$1 = cljs.core.next(seq__51000);
var a = first__51001;
var more = seq__51000__$1;
var value_path = vec__50999;
var p = bh_ui.utils.helpers.path__GT_keyword.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([container_id,a,more], 0));
var orig_value = cljs.core.deref(re_frame.core.subscribe.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [p], null)));
var new_value = (fn_to_apply.cljs$core$IFn$_invoke$arity$1 ? fn_to_apply.cljs$core$IFn$_invoke$arity$1(orig_value) : fn_to_apply.call(null,orig_value));
return bh_ui.utils.locals.dispatch_local(container_id,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [value_path], null),new_value);
});
/**
 * build the subscription needed to access all the 'local' configuration
 *   properties
 * 
 *   1. process-locals
 *   2. map over the result and call ui-utils/subscribe-local
 *   3. put the result into a hash-map
 *   
 */
bh_ui.utils.locals.build_subs = (function bh_ui$utils$locals$build_subs(component_id,local_config){
var ret = cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (path){
return cljs.core.PersistentArrayMap.createAsIfByAssoc([path,bh_ui.utils.locals.subscribe_local(component_id,path)]);
}),bh_ui.utils.locals.process_locals(cljs.core.PersistentVector.EMPTY,null,local_config)));
return ret;
});
bh_ui.utils.locals.resolve_sub = (function bh_ui$utils$locals$resolve_sub(subs,path){
var ret = cljs.core.get.cljs$core$IFn$_invoke$arity$2(subs,cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentVector.EMPTY,cljs.core.map.cljs$core$IFn$_invoke$arity$2(bh_ui.utils.helpers.path__GT_keyword,path)));
if((((ret instanceof reagent.ratom.RAtom)) || ((((ret instanceof cljs.core.Atom)) || ((ret instanceof reagent.ratom.Reaction)))))){
return cljs.core.deref(ret);
} else {
return ret;
}
});

//# sourceMappingURL=bh_ui.utils.locals.js.map
