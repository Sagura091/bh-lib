{"version":3,"sources":["ui_component/organism/ui_grid.cljs"],"mappings":"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","names":["taoensso.timbre._log_BANG_","taoensso.timbre/*config*","cljs.core/Delay","p__61129","vec__61130","cljs.core.nth","p1__61128#","ui-component.organism.ui-grid/make-widget","id","title","content","bk-color","txt-color","ui-component.organism.ui-grid/update-layout-sub","layout","updated-layout","ui-component.utils.helpers/handle-change-path","ui-component.organism.ui-grid/update-layout-ratom","cljs.core/reset!","ui-component.organism.ui-grid/update-layout","cljs.core/Keyword","cljs.core/coll?","cljs.core/seq","cljs.core/every?","cljs.core/keyword?","reagent.ratom/RAtom","cljs.core/Atom","ui-component.organism.ui-grid/on-layout-change","new-layout","n-l","cljs.core.js__GT_clj","fst","cljs.core/first","cljs.core/count","cljs.core.not_EQ_","cooked","p1__61133#","cljs.core.map","cljs.core/zipmap","cljs.core.juxt","var_args","args__4870__auto__","len__4864__auto__","i__4865__auto__","argseq__4871__auto__","cljs.core/IndexedSeq","ui-component.organism.ui-grid/component","p__61135","map__61136","cljs.core/--destructure-map","cljs.core.get","seq61134","self__4852__auto__","widgets","container-id","r-widgets","ui-component.utils.helpers/resolve-value","r-layout","cljs.core/deref","ui-component.atom.layout.responsive-grid/grid","cljs.core.doall","cljs.core.partial"],"sourcesContent":["(ns ui-component.organism.ui-grid\n  (:require [ui-component.atom.layout.responsive-grid :as grid]\n            [ui-component.utils.helpers :as h]\n            [reagent.ratom]\n            [taoensso.timbre :as log]))\n\n\n(log/info \"ui-component.organism.ui-grid\")\n\n\n(defn- make-widget [[id title content bk-color txt-color]]\n  ;(log/info \"make-widget\" id \"//\" title)\n\n  [:div.widget-parent {:key   id\n                       :style {:width \"100%\" :height \"100%\"}}\n   [:div.grid-toolbar.title-wrapper.move-cursor\n    [:div {:style {:background-color bk-color\n                   :color            txt-color\n                   :padding          \"5px\"\n                   :font-weight      :bold\n                   :font-size        \"1.1em\"}}\n     title]]\n   [:div.widget.widget-content\n    {:style         {:width       \"100%\"\n                     :height      \"90%\"\n                     :cursor      :default\n                     :align-items :stretch\n                     :display     :flex}\n     :on-mouse-down #(.stopPropagation %)}\n    content]])\n\n\n(defn- update-layout-sub [layout updated-layout]\n  ;(log/info \"update-layout-sub\" layout \"//\" updated-layout)\n  (h/handle-change-path layout [] updated-layout))\n\n\n(defn- update-layout-ratom [layout updated-layout]\n  ;(log/info \"update-layout-ratom\" layout \"//\" updated-layout)\n  (reset! layout updated-layout))\n\n\n(defn- update-layout [layout updated-layout]\n  ;(log/info \"update-layout\" layout \"//\" updated-layout)\n  ;\n  ;(log/info \"update-layout\" (keyword? layout)\n  ;  \"//\" (coll? layout)\n  ;  \"//\" (seq layout)\n  ;  \"//\" (every? keyword? layout)\n  ;  \"////\" (instance? reagent.ratom.RAtom layout)\n  ;  \"//\" (instance? Atom layout))\n\n  (cond\n    (keyword? layout) (update-layout-sub layout updated-layout)\n\n    (and (coll? layout)\n      (seq layout)\n      (every? keyword? layout)) (update-layout-sub layout updated-layout)\n\n    (or (instance? reagent.ratom.RAtom layout)\n      ;(instance? reagent.ratom.Reaction layout)\n      (instance? Atom layout)) (update-layout-ratom layout updated-layout)\n\n    :else ()))\n\n\n(defn on-layout-change [layout new-layout]\n  ;; note the need to convert the callbacks from js objects\n  (let [n-l (js->clj new-layout :keywordize-keys true)\n        fst (first n-l)]\n\n    ;(log/info \"on-layout-change\" @widgets \"//\" new-layout)\n\n    (when (and\n            (seq n-l)\n            (<= 1 (count n-l))\n            (not= (:i fst) \"null\"))\n      (let [cooked (map #(zipmap '(:i :x :y :w :h) %)\n                     (map (juxt :i :x :y :w :h) n-l))]\n        ;(log/info \"on-layout-change (cooked)\" cooked\n        ;  \"//\" (zipmap (map :i cooked) cooked))\n        (update-layout layout cooked)))))\n\n\n(defn component [& {:keys [widgets layout container-id]}]\n\n  (let [r-widgets (h/resolve-value widgets)\n        r-layout  (h/resolve-value layout)]\n\n    ;(log/info \"component (resolve)\" container-id\n    ;  \"//\" @r-widgets\n    ;  \"//\" @r-layout)\n\n    (fn []\n      [grid/grid\n       :id container-id\n       :children (doall (map make-widget @r-widgets))\n       :cols 20\n       :layoutFn (partial on-layout-change layout)\n       :layout @r-layout])))"]}